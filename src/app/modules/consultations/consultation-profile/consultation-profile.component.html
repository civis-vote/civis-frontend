<section>
  <div class="consultation-bg-img" [ngStyle]="{'background-image': 'url(' + profileData?.ministry?.coverPhoto?.url + ')'}"></div>
  <div class="consultation-profile">

    <aside class="consultation-profile__sidebar-section">
      <app-profile-card [profile]='profileData' (openFeedbackModal)="openFeedbackModal()"></app-profile-card>
    </aside>
    <section>
      <router-outlet></router-outlet>
    </section>
  </div>
</section>

<!-- rating-model -->
<div class="feedback-index">
  <div bsModal #feedbackModal="bs-modal" class="modal fade" tabindex="-1" [ngClass]="step == 2 ? 'align-center' : ''"
    [config]="{show: false, backdrop: 'static', ignoreBackdropClick: true, keyboard: false}" role="dialog"
    aria-labelledby="feedbackModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <p class="heading">Hereâ€™re the overall satisfation levels for this draft from people</p>
        </div>
        <div class="modal-body">
          <label class="radio-block">
            <div class="radio-btn">
              <div class="radio-text" [class.active-text]="responseFeedback === 'dissatisfied'">Dissatisfied</div>
              <div class="mx-2 count-text" *ngIf="responseFeedback">{{satisfactionRatingDistribution?.dissatisfied ?
                satisfactionRatingDistribution?.dissatisfied : 0}}</div>
              <div *ngIf="responseFeedback" class="progress-color" [class.active-progress]="responseFeedback === 'dissatisfied'"
                [ngStyle]="{'width': satisfactionRatingDistribution?.dissatisfied ? getPercentageValue(satisfactionRatingDistribution, 'dissatisfied') + '%' : '0%' }"></div>
            </div>
            <div class="input-space">
              <input type="radio" class="cm-radio ml-3" name="feedback" value="dissatisfied" [(ngModel)]="responseFeedback"
                (ngModelChange)="choose($event)" [disabled]="(responseFeedback && responseFeedback !== 'dissatisfied')">
            </div>
          </label>
          <label class="radio-block">
            <div class="radio-btn">
              <div class="radio-text" [class.active-text]="responseFeedback === 'somewhat_dissatisfied'">Somewhat
                Dissatisfied</div>
              <div class="mx-2 count-text" *ngIf="responseFeedback">{{satisfactionRatingDistribution?.somewhat_dissatisfied
                ? satisfactionRatingDistribution?.somewhat_dissatisfied : 0}}</div>
              <div *ngIf="responseFeedback" class="progress-color" [class.active-progress]="responseFeedback === 'somewhat_dissatisfied'"
                [ngStyle]="{'width': satisfactionRatingDistribution?.somewhat_dissatisfied ? getPercentageValue(satisfactionRatingDistribution, 'somewhat_dissatisfied') + '%' : '0%' }"></div>
            </div>
            <div class="input-space">
              <input type="radio" class="cm-radio ml-3" name="feedback" value="somewhat_dissatisfied" [(ngModel)]="responseFeedback"
                (ngModelChange)="choose($event)" [disabled]="(responseFeedback && responseFeedback !== 'somewhat_dissatisfied')">
            </div>
          </label>
          <label class="radio-block">
            <div class="radio-btn">
              <div class="radio-text" [class.active-text]="responseFeedback === 'somewhat_satisfied'">Somewhat
                Satisfied</div>
              <div class="mx-2 count-text" *ngIf="responseFeedback">{{satisfactionRatingDistribution?.somewhat_satisfied
                ? satisfactionRatingDistribution?.somewhat_satisfied : 0}}</div>
              <div *ngIf="responseFeedback" class="progress-color" [class.active-progress]="responseFeedback === 'somewhat_satisfied'"
                [ngStyle]="{'width': satisfactionRatingDistribution?.somewhat_satisfied ? getPercentageValue(satisfactionRatingDistribution, 'somewhat_satisfied') + '%' : '0%' }"></div>
            </div>
            <div class="input-space">
              <input type="radio" class="cm-radio ml-3" name="feedback" value="somewhat_satisfied" [(ngModel)]="responseFeedback"
                (ngModelChange)="choose($event)" [disabled]="(responseFeedback && responseFeedback !== 'somewhat_satisfied')">
            </div>
          </label>
          <label class="radio-block">
            <div class="radio-btn">
              <div class="radio-text" [class.active-text]="responseFeedback === 'satisfied'">Satisfied</div>
              <div class="mx-2 count-text" *ngIf="responseFeedback">{{satisfactionRatingDistribution?.satisfied ?
                satisfactionRatingDistribution?.satisfied : 0}}</div>
              <div *ngIf="responseFeedback" class="progress-color" [class.active-progress]="responseFeedback === 'satisfied'"
                [ngStyle]="{'width': satisfactionRatingDistribution?.satisfied ? getPercentageValue(satisfactionRatingDistribution, 'satisfied') + '%' : '0%' }"></div>
            </div>
            <div class="input-space">
              <input type="radio" class="cm-radio ml-3" name="feedback" value="satisfied" [(ngModel)]="responseFeedback"
                (ngModelChange)="choose($event)" [disabled]="(responseFeedback && responseFeedback !== 'satisfied')">
            </div>
          </label>
          <div class="footer-space">
            <div class="footer-space__left">
              <div class="points-text">You get 50 points for submitting this!</div>
              <div class="link">View Leaderboard</div>
            </div>
            <div class="footer-space__right">
              <button (click)="createResponse()">Ok Great</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>